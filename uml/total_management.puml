@startuml
!theme plain
skinparam componentStyle rectangle

package "total_management.py" {
  [initialize_globals] as init
  [total_management] as main
  [site_operation] as site
  [processing_csv_post_cut] as process
  [credit_closed_by_month] as credit
  [upload_data] as upload
  [fechas_corte_tarjeta] as fechas
  [message_print] as msg
  [create_directory_if_not_exists] as create_dir
  [yaml_creation] as yaml
  [add_to_gitignore] as gitignore
  [parse_fecha_ddmmyyyy] as parse_date
  [generador_conceptos] as conceptos
  [open_folder] as open_f
}

package "External Modules" {
  [business_management] as biz
  [chrome_driver_load] as chrome
  [process_closed_credit_accounts] as pcc
  [export_pickle] as export
}

package "Main Entry Point" {
  [__main__] as entry
}

' Main flow
entry --> init : initialize_globals()
entry --> main : total_management()
entry --> biz : business_management(folder_root)

' total_management calls
main --> yaml : yaml_creation()
main --> create_dir : create_directory_if_not_exists()
main --> gitignore : add_to_gitignore()
main --> credit : credit_closed_by_month()
main --> msg : message_print()
main --> chrome : chrome_driver_load()
main --> site : site_operation()
main --> process : processing_csv_post_cut()
main --> fechas : fechas_corte_tarjeta()

' site_operation calls
site --> msg : message_print()
site --> create_dir : create_directory_if_not_exists()

' processing_csv_post_cut calls
process --> msg : message_print()

' credit_closed_by_month calls
credit --> msg : message_print()
credit --> pcc : process_closed_credit_accounts()
credit --> export : export_pickle()
credit --> open_f : open_folder()

' fechas_corte_tarjeta calls
fechas --> parse_date : parse_fecha_ddmmyyyy()

' upload_data calls (currently unused)
upload --> msg : message_print()

' generador_conceptos calls (currently unused)
conceptos --> msg : message_print()

' Helper functions
open_f --> msg : message_print()
create_dir --> msg : message_print()
yaml --> msg : message_print()

' Global variable initialization
init --> chrome : imports load_chrome
init --> pcc : imports process_closed_credit_accounts
init --> export : imports export_pickle

note right of upload : ⚠️ NOT CALLED\nFunction defined but unused
note right of conceptos : ⚠️ NOT CALLED\nFunction defined but unused
note right of open_f : ⚠️ NOT CALLED\nFunction defined but unused

@enduml